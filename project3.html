<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Rafik Ibrahim - Lead Electrical Engineer - Retro Multiplayer Game Console Project" />
  <title>Retro Multiplayer Game Console | Rafik Ibrahim</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* ========================================
       PREMIUM ENGINEERING PORTFOLIO THEME
       ========================================
    */
    :root {
      --bg-deep: #020204;
      --bg-panel: #0f0f13;
      --accent-cyan: #00f2ff;
      --accent-blue: #0077ff;
      --accent-purple: #bd00ff;
      --text-primary: #ffffff;
      --text-secondary: #a0a0b0;
      --border-light: rgba(255, 255, 255, 0.08);
      --glass-surface: rgba(20, 20, 30, 0.7);
    }

    body {
      background-color: var(--bg-deep);
      color: var(--text-primary);
      font-family: 'Inter', system-ui, -apple-system, sans-serif;
      line-height: 1.8;
      margin: 0;
      padding: 0;
      background-image: 
        radial-gradient(circle at 15% 15%, rgba(0, 242, 255, 0.03) 0%, transparent 25%),
        radial-gradient(circle at 85% 85%, rgba(189, 0, 255, 0.03) 0%, transparent 25%);
    }

    /* TYPOGRAPHY */
    h1, h2, h3, h4, h5 {
      color: var(--text-primary);
      margin-bottom: 1rem;
      font-weight: 700;
      letter-spacing: -0.01em;
    }

    h3 {
      font-size: 3.5rem;
      text-align: center;
      background: linear-gradient(135deg, #fff 0%, #a0a0b0 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      margin-bottom: 60px;
      margin-top: 40px;
    }

    h4 {
      font-size: 1.8rem;
      color: var(--accent-cyan);
      margin-top: 80px;
      margin-bottom: 30px;
      padding-bottom: 15px;
      border-bottom: 1px solid var(--border-light);
      display: inline-block;
    }

    h5 {
      font-size: 1.2rem;
      color: var(--accent-blue);
      margin-top: 0;
    }

    p, li {
      color: var(--text-secondary);
      font-size: 1.1rem;
      margin-bottom: 20px;
    }

    strong {
      color: #fff;
      font-weight: 600;
    }

    /* LAYOUT CONTAINERS */
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 0 40px 100px;
    }

    section {
      position: relative;
    }

    /* INFO CARDS (Glassmorphism) */
    .tech-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
      gap: 30px;
      margin: 50px 0;
    }

    .card {
      background: var(--glass-surface);
      backdrop-filter: blur(12px);
      border: 1px solid var(--border-light);
      border-radius: 20px;
      padding: 40px;
      transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1), box-shadow 0.4s ease;
    }

    .card:hover {
      transform: translateY(-5px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.4);
      border-color: rgba(0, 242, 255, 0.3);
    }

    .card ul {
      list-style: none;
      padding: 0;
    }

    .card li {
      padding-left: 25px;
      position: relative;
    }

    .card li::before {
      content: "▪";
      color: var(--accent-cyan);
      position: absolute;
      left: 0;
      top: -2px;
      font-size: 1.5rem;
    }

    /* DATA TABLES */
    .data-table {
      width: 100%;
      border-collapse: collapse;
      background: var(--bg-panel);
      border-radius: 12px;
      overflow: hidden;
      margin: 30px 0;
      border: 1px solid var(--border-light);
    }

    .data-table th, .data-table td {
      padding: 20px;
      text-align: left;
      border-bottom: 1px solid var(--border-light);
    }

    .data-table th {
      background: rgba(255, 255, 255, 0.03);
      color: var(--accent-cyan);
      text-transform: uppercase;
      font-size: 0.9rem;
      letter-spacing: 0.05em;
    }

    .data-table td {
      color: var(--text-secondary);
    }

    .data-table tr:last-child td {
      border-bottom: none;
    }

    /* IMAGE GALLERY */
    .image-gallery {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 40px;
      margin-top: 60px;
    }

    .gallery-item {
      background: var(--bg-panel);
      padding: 20px;
      border-radius: 16px;
      border: 1px solid var(--border-light);
    }

    .gallery-item img {
      width: 100%;
      height: auto;
      border-radius: 12px;
      display: block;
      transition: opacity 0.3s;
    }

    .caption {
      margin-top: 15px;
      color: var(--accent-blue);
      font-size: 0.9rem;
      text-align: center;
      font-weight: 500;
      letter-spacing: 0.02em;
    }

    .full-width {
      grid-column: span 2;
    }

    /* NAVIGATION - Updated Styles */
    .navbar {
      background: rgba(2, 2, 4, 0.95);
      backdrop-filter: blur(20px);
      border-bottom: 1px solid var(--border-light);
      padding: 25px 0;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .navbar-inner {
      max-width: 1400px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 0 40px;
    }

    .nav-name {
      font-weight: 800;
      font-size: 1.5rem;
      /* Gradient Name Style */
      background: linear-gradient(90deg, #fff, var(--accent-cyan));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .navbar nav a {
      color: var(--text-secondary);
      text-decoration: none;
      margin-left: 40px;
      font-weight: 500;
      transition: color 0.3s;
    }

    /* Active Link Style */
    .navbar nav a:hover, .navbar nav a.active {
      color: var(--accent-cyan);
    }

    /* SKILLS TAGS */
    .skill-tag {
      display: inline-block;
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid var(--border-light);
      padding: 8px 16px;
      border-radius: 20px;
      margin: 5px 5px 0 0;
      font-size: 0.9rem;
      color: var(--accent-cyan);
    }

    @media (max-width: 900px) {
      .image-gallery { grid-template-columns: 1fr; }
      .full-width { grid-column: span 1; }
      h3 { font-size: 2.5rem; }
    }
  </style>
</head>
<body>

  <header class="navbar">
    <div class="navbar-inner">
      <div class="nav-name">Rafik Ibrahim</div>
      <nav>
        <a href="index.html">Home</a>
        <a href="resume.html">Resume</a>
        <a href="projects.html" class="active">Projects</a>
      </nav>
    </div>
  </header>

  <div class="container">
    
    <h3 style="margin-bottom: 40px;">Retro Multiplayer Game Console</h3>

    <section>
      <h4>1. Introduction & Motivation</h4>
      <p>
        <strong>The Mission:</strong> Modern gaming has become increasingly complex, expensive, and isolated, often relying on high-end hardware and internet connectivity. "Project R&F" was conceived to revive the social aspect of gaming by engineering a console that bridges retro nostalgia with modern embedded technology. Our goal was to create a cost-effective, accessible, and purely offline multiplayer experience that encourages face-to-face interaction.
      </p>
      <p>
        <strong>The Innovation:</strong> The primary innovation is to make old retro single-player games into multiplayer experiences. Unlike traditional retro emulators that use a single shared screen or split-screen software, this system drives <strong>two independent VGA monitors</strong> simultaneously. This allows for true "head-to-head" multiplayer functionality where each player has a dedicated view, yet the game state remains perfectly synchronized via a custom hardware link.
      </p>
      <p>
        <strong>The Engineering Challenge:</strong> The project required the development of a <strong>distributed embedded network</strong>. To achieve real-time performance without an Operating System, we offloaded tasks across multiple specialized microcontrollers:
      </p>
      <ul>
        <li><strong>Main Console:</strong> Two ESP32-WROVER units communicate via a high-speed UART bridge to sync physics with zero latency.</li>
        <li><strong>Wireless Control:</strong> Custom-built controllers use ATmega328P chips to process analog inputs and transmit data via <strong>HC-05 Bluetooth</strong> modules.</li>
        <li><strong>Visuals:</strong> Video signals are generated "bare metal" using Direct Memory Access (DMA) and GPIO bit-banging to produce standard VGA signals without a GPU.</li>
      </ul>
    </section>

    <section>
      <div class="tech-grid">
        <div class="card">
          <h5>My Role: Lead Electrical Engineer</h5>
          <p>
            Leading a team of three Computer Engineers, I was solely responsible for the <strong>entire hardware lifecycle</strong>. This included the schematic capture and PCB layout of all three system boards (Main Console, Audio Subsystem, and Controllers) using <strong>Altium Designer</strong>. I engineered the power architecture to support 72-hour runtimes, designed the mixed-signal VGA output stages, and managed the physical fabrication of the enclosures. Additionally, I bridged the gap between hardware and software, writing the low-level drivers for the Bluetooth stack and audio synchronization.
          </p>
        </div>
        <div class="card">
          <h5>System Specifications</h5>
          <ul>
            <li><strong>Architecture:</strong> Distributed Network (2x ESP32 Masters + 2x ATmega328P Slaves).</li>
            <li><strong>Video Output:</strong> Dual Stream Digital VGA (320x200 @ 60Hz).</li>
            <li><strong>Power Autonomy:</strong> 72 Hours (Parallel Li-Ion Configuration).</li>
            <li><strong>Synchronization:</strong> Hardwired UART Bridge (115200 baud).</li>
            <li><strong>Wireless Latency:</strong> < 50ms (Bluetooth HC-05).</li>
          </ul>
        </div>
      </div>
    </section>

    <section>
      <h4>2. System Architecture & Component Selection</h4>
      <p>
        The decision to use a distributed multi-processor architecture was driven by the need to isolate high-speed video generation from asynchronous user input. Below is the rationale for the key components we selected for the final design.
      </p>
      
      <div class="tech-grid">
        <div class="card">
          <h5>Main Processing Unit: ESP32-WROVER-E</h5>
          <p>
            We selected the ESP32-WROVER-E for the main console due to its dual-core Xtensa LX6 architecture running at 240 MHz.
          </p>
          <ul>
            <li><strong>Reasoning:</strong> The VGA signal generation requires strict timing (25.175 MHz pixel clock). A single-core MCU would struggle to handle this alongside game logic. With the ESP32, we could dedicate <strong>Core 1</strong> entirely to video signal generation (using the I2S peripheral in parallel mode) while <strong>Core 0</strong> handled the game physics, audio triggers, and UART communication.</li>
            <li><strong>Memory:</strong> The WROVER module includes 8MB of PSRAM, which was essential for storing the double-buffered frame data required for smooth 60fps animation.</li>
          </ul>
        </div>
        <div class="card">
          <h5>Controller Logic: ATmega328P</h5>
          <p>
            For the wireless controllers, we chose the ATmega328P (the chip found in the Arduino Uno).
          </p>
          <ul>
            <li><strong>Reasoning:</strong> The controllers only need to sample analog inputs (joysticks) and digital buttons (tactile switches) and transmit them via UART. The ATmega328P is extremely power-efficient in this role and offers robust 10-bit ADC channels for precise joystick tracking.</li>
            <li><strong>Form Factor:</strong> Using the standalone DIP-28 chip allowed us to design a custom PCB footprint that fits comfortably in a handheld enclosure, rather than using a bulky development board.</li>
          </ul>
        </div>
        <div class="card">
          <h5>Wireless Communication: HC-05 Bluetooth</h5>
          <p>
            We utilized the HC-05 Bluetooth Classic module in a Master/Slave configuration.
          </p>
          <ul>
            <li><strong>Reasoning:</strong> While Wi-Fi was an option, it introduces significant power overhead and connection latency. The HC-05 operating over the Serial Port Profile (SPP) provides a dedicated, low-latency data pipe that is simpler to debug and consumes less power than Wi-Fi.</li>
            <li><strong>Implementation:</strong> We configured the controller modules as Masters and the console modules as Slaves, binding them to specific MAC addresses to prevent cross-talk in noisy RF environments.</li>
          </ul>
        </div>
      </div>
    </section>

    <section>
      <h4>3. Detailed Hardware Implementation</h4>
      <p>
        As a group, we focused on building a robust hardware ecosystem. My specific focus was on moving from breadboard prototypes to three custom-fabricated Printed Circuit Boards (PCBs). This required careful consideration of power integrity, signal routing, and thermal management.
      </p>

      <div class="tech-grid">
        <div class="card">
          <h5>Power Architecture Design</h5>
          <p>
            We engineered a power system designed for extreme endurance. The controller uses two <strong>18650 Lithium-Ion batteries (3300mAh each)</strong> wired in parallel, providing a total capacity of <strong>6.6Ah at 3.7V</strong>.
          </p>
          <ul>
            <li><strong>Regulation:</strong> We integrated a high-efficiency DC-DC Step-Up Boost Converter to elevate the 3.7V battery voltage to a stable 5V, required for the ATmega328P and HC-05 modules.</li>
            <li><strong>UPS Functionality:</strong> The design includes a TP4056-based load-sharing circuit that allows the device to charge via USB-C while simultaneously powering the system.</li>
            <li><strong>Efficiency Analysis:</strong> With a 92% efficiency boost converter, the calculated usable energy is approximately 22.47 Wh, enabling over 72 hours of continuous runtime—far exceeding the initial 6-hour requirement.</li>
          </ul>
        </div>
        <div class="card">
          <h5>Signal Integrity & Mixed-Signal Design</h5>
          <p>
            Generating a clean VGA signal from a microcontroller requires precise signal integrity.
          </p>
          <ul>
            <li><strong>Logic Level Shifting:</strong> The HC-05 Bluetooth module operates at 3.3V logic, while the ATmega328P runs at 5V. We designed voltage divider circuits (1kΩ / 2.2kΩ) on the PCB TX/RX lines to safely step down signals.</li>
            <li><strong>Audio Isolation:</strong> To prevent digital switching noise from coupling into the audio output, we physically separated the Audio Subsystem onto its own PCB with a dedicated ground plane.</li>
            <li><strong>VGA Output:</strong> We routed the 5-pin VGA signals (Red, Green, Blue, H-Sync, V-Sync) directly from the ESP32 GPIOs, carefully matching trace lengths to minimize skew.</li>
          </ul>
        </div>
      </div>
      
      <h5 style="margin-top: 40px; color: var(--accent-cyan); text-transform: uppercase; letter-spacing: 0.05em;">Bill of Materials (Selected Key Components)</h5>
      <p style="font-size: 0.9rem; margin-bottom: 20px;">*Note: This list highlights the most critical components in the system architecture, not the exhaustive BOM.</p>
      <table class="data-table">
        <thead>
          <tr>
            <th>Component</th>
            <th>Specification</th>
            <th>Quantity</th>
            <th>Role</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>ESP32-WROVER-E</td>
            <td>Dual Core 240MHz, 8MB PSRAM</td>
            <td>2</td>
            <td>Main Console Processing & Video Generation</td>
          </tr>
          <tr>
            <td>ATmega328P-PU</td>
            <td>8-bit AVR, 20MHz</td>
            <td>3</td>
            <td>Controller Logic & Audio Management</td>
          </tr>
          <tr>
            <td>HC-05 Bluetooth</td>
            <td>Bluetooth 2.0+EDR, SPP Profile</td>
            <td>2</td>
            <td>Wireless Data Transmission (Input)</td>
          </tr>
          <tr>
            <td>MT3608</td>
            <td>2A DC-DC Step Up Converter</td>
            <td>2</td>
            <td>Boosts 3.7V Li-Ion to 5V System Rail</td>
          </tr>
          <tr>
            <td>DFPlayer Mini</td>
            <td>MP3 Decoder Module</td>
            <td>1</td>
            <td>Hardware Audio Decoding</td>
          </tr>
          <tr>
            <td>Analog Joystick</td>
            <td>2-Axis Potentiometer with Switch</td>
            <td>2</td>
            <td>User Input Control</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section>
      <h4>4. Schematic Capture & PCB Fabrication</h4>
      <p>
        We utilized <strong>Altium Designer</strong> for the complete ECAD workflow. Below is the documentation of the three distinct boards we designed, routed, and assembled for this project.
      </p>

      <div class="image-gallery">
        <div class="gallery-item">
          <img src="images/retro%20game%20console%20project/controller_schematic.png" alt="Controller Schematic">
          <div class="caption">1. Wireless Controller Schematic: Integrating ATmega328P, HC-05 Bluetooth, and Power Management circuits.</div>
        </div>

        <div class="gallery-item">
          <img src="images/retro%20game%20console%20project/controller%20pcb.png" alt="Controller PCB">
          <div class="caption">2. Controller PCB Layout: Compact form-factor optimized for handheld ergonomics with integrated antenna clearance.</div>
        </div>

        <div class="gallery-item">
          <img src="images/retro%20game%20console%20project/main%20board%20schematic.png" alt="Main Board Schematic">
          <div class="caption">3. Main Console Schematic: Dual ESP32 architecture showing the UART Synchronization Bridge.</div>
        </div>

        <div class="gallery-item">
          <img src="images/retro%20game%20console%20project/main%20board%20pcb.png" alt="Main Board PCB">
          <div class="caption">4. Main Board PCB: The central processing hub hosting two ESP32s and dual VGA ports.</div>
        </div>

        <div class="gallery-item">
          <img src="images/retro%20game%20console%20project/music%20player%20schematic.jpg" alt="Music Player Schematic">
          <div class="caption">5. Audio Subsystem Schematic: Dedicated ATmega328P and DFPlayer Mini circuit.</div>
        </div>

        <div class="gallery-item">
          <img src="images/retro%20game%20console%20project/music%20player%20pcb.png" alt="Music Player PCB">
          <div class="caption">6. Audio Subsystem PCB: Modular design to isolate analog audio from digital noise.</div>
        </div>

        <div class="gallery-item full-width">
          <img src="images/retro%20game%20console%20project/full%20main%20board%20pcb.png" alt="Full Console PCB">
          <div class="caption">7. System Integration: The Main Console PCB physically mated with the Audio Subsystem.</div>
        </div>

        <div class="gallery-item full-width">
          <img src="images/retro%20game%20console%20project/overall%20PCB.png" alt="Overall PCB Project">
          <div class="caption">8. Complete Hardware Suite: The full set of custom-fabricated boards for the console and controllers.</div>
        </div>
      </div>
    </section>

    <section>
      <h4>5. Verification & Performance Data</h4>
      <p>
        Rigorous testing was conducted to verify that the hardware met the demanding requirements of real-time gaming. The following data was collected during the final validation phase.
      </p>

      <table class="data-table">
        <thead>
          <tr>
            <th>Performance Metric</th>
            <th>Requirement</th>
            <th>Measured Result</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Controller Battery Life</strong></td>
            <td>≥ 6 Hours</td>
            <td><strong>72 Hours</strong> (Avg of 6 trials)</td>
            <td style="color: #00ff88;">Exceeded</td>
          </tr>
          <tr>
            <td><strong>Input Latency</strong></td>
            <td>≤ 100 ms</td>
            <td><strong>38 - 52 ms</strong></td>
            <td style="color: #00ff88;">Pass</td>
          </tr>
          <tr>
            <td><strong>Bluetooth Pairing Time</strong></td>
            <td>< 10 Seconds</td>
            <td><strong>4.02 Seconds</strong> (Avg)</td>
            <td style="color: #00ff88;">Pass</td>
          </tr>
          <tr>
            <td><strong>VGA Sync Stability</strong></td>
            <td>60 Hz ± 1%</td>
            <td><strong>60.1 Hz</strong></td>
            <td style="color: #00ff88;">Pass</td>
          </tr>
          <tr>
            <td><strong>Power Rail Stability</strong></td>
            <td>5V ± 5%</td>
            <td><strong>5.0V ± 0.05V</strong> (Under Load)</td>
            <td style="color: #00ff88;">Pass</td>
          </tr>
        </tbody>
      </table>
    </section>

    <section>
      <h4>6. Engineering Challenges & Solutions</h4>
      <div class="tech-grid">
        <div class="card">
          <h5>Challenge: The "Everything Everywhere" Crash</h5>
          <p><strong>Problem:</strong> Running Wi-Fi (for multiplayer), Bluetooth (for controllers), and VGA generation simultaneously caused system-wide failure due to radio resource contention on the 2.4GHz band.</p>
          <p><strong>Solution:</strong> We completely removed Wi-Fi from the architecture. We replaced it with a hardwired UART link (GPIO 16/17) between the two ESP32s. This decoupled the multiplayer sync from the radio stack, resolving the crash and lowering power consumption.</p>
        </div>
        <div class="card">
          <h5>Challenge: Audio Latency & Jitter</h5>
          <p><strong>Problem:</strong> Handling audio directly on the ESP32 introduced jitter into the VGA signal due to interrupt overhead.</p>
          <p><strong>Solution:</strong> We designed a dedicated Audio PCB with its own ATmega328P. The main console simply sends a brief 27ms GPIO trigger signal, and the dedicated board handles the heavy lifting of MP3 decoding via the DFPlayer Mini.</p>
        </div>
      </div>
    </section>

    <section>
      <h4>7. Engineering Skills & Tools Applied</h4>
      <p>
        This project served as a comprehensive application of electrical engineering curriculum, requiring the integration of power, analog, and digital domains.
      </p>
      
      <div class="tech-grid">
        <div class="card">
          <h5>Hardware Design</h5>
          <div>
            <span class="skill-tag">Altium Designer</span>
            <span class="skill-tag">Schematic Capture</span>
            <span class="skill-tag">PCB Layout</span>
            <span class="skill-tag">Mixed-Signal Routing</span>
            <span class="skill-tag">Component Selection</span>
            <span class="skill-tag">Design for Manufacturing (DFM)</span>
            <span class="skill-tag">Circuit Analysis</span>
            <span class="skill-tag">BOM Management</span>
            <span class="skill-tag">Signal Integrity</span>
            <span class="skill-tag">Impedance Matching</span>
          </div>
        </div>
        <div class="card">
          <h5>Embedded Systems</h5>
          <div>
            <span class="skill-tag">UART Synchronization</span>
            <span class="skill-tag">Bluetooth (HC-05)</span>
            <span class="skill-tag">VGA Signal Generation</span>
            <span class="skill-tag">ATmega328P</span>
            <span class="skill-tag">ESP32</span>
            <span class="skill-tag">Interrupt Handling</span>
            <span class="skill-tag">Serial Communication (I2C/SPI)</span>
            <span class="skill-tag">Datasheet Analysis</span>
          </div>
        </div>
        <div class="card">
          <h5>Power & Testing</h5>
          <div>
            <span class="skill-tag">DC-DC Converters</span>
            <span class="skill-tag">Battery Management</span>
            <span class="skill-tag">Oscilloscopes</span>
            <span class="skill-tag">Logic Analyzers</span>
            <span class="skill-tag">Current Profiling</span>
            <span class="skill-tag">Voltage Regulation</span>
            <span class="skill-tag">Soldering & Assembly</span>
            <span class="skill-tag">Power Budgeting</span>
            <span class="skill-tag">Team Leadership</span>
          </div>
        </div>
      </div>
    </section>

  </div>

  <footer style="text-align: center; padding: 60px 0; border-top: 1px solid var(--border-light); color: var(--text-secondary);">
    <p>&copy; 2026 Rafik Ibrahim | Electrical Engineer</p>
  </footer>

</body>
</html>
